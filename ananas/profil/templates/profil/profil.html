<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ananas</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style>
        .edit{
            padding:0 !important;
        }
        .edit a{
            display: block;
            padding:6px;
        }

    </style>
</head>

<hr>
<div class="container bootstrap snippet">

    <div class="row">
        <div class="col-sm-3"><!--left col-->


            <div class="text-center">
                {% if UserProfile.photo is not None and UserProfile.photo != "" %}
                    <img src="{{ UserProfile.photo.url }}" alt="">
                {% else %}
                    <img src="{{ UserProfile.avatar }}" alt="">
                {% endif %}


            </div>
            </hr><br>


            <div class="panel panel-default">
                <div class="panel-heading">Date d'inscription <i class="fa fa-1x"></i></div>
                <div class="panel-body"> {{ UserProfile.date_joined }} </div>
            </div>


            <ul class="list-group">
                <li class="list-group-item text-muted">Activity <i class="fa fa-dashboard fa-3x"></i></li>
                <li class="list-group-item text-right"><span class="pull-left"><strong>Articles</strong></span>{{countArticles}}</li>
                <li class="list-group-item text-right"><span class="pull-left"><strong>Commentaires</strong></span>{{countCommentaires}}</li>
                <li class="list-group-item text-right"><span class="pull-left"><strong>Messages</strong></span>{{countMessages}}</li>
            </ul>

        </div><!--/col-3-->
        <div class="col-sm-9">
            <div class="userData ml-3">
                {% if UserProfile == request.user %}
                    <button class="btn btn-outline-danger pull-right btn-lg edit"><a href="{% url 'update-profil' %}">Editer</a>
                    </button>
                {% endif %}
                <h2 class="d-block"
                    style="font-size: 3rem; font-weight: bold">{{ UserProfile.first_name }} {{ UserProfile.last_name }}</h2>

                {% if UserProfile.is_autre %}
                    <span class="label label-danger">Administration</span>
                {% else %}
                    <span class="label label-danger ">Etudiant</span>
                {% endif %}
            </div>

            <hr>
            <div class="form-group">

                <div class="col-xs-6">
                    <p for="first_name"><h4>Prénom</h4></p>
                    <p><i class="fas fa-user" id="first_name"></i>{{ UserProfile.first_name }}</p>
                </div>
            </div>
            <div class="form-group">

                <div class="col-xs-6">
                    <label for="last_name"><h4>Nom</h4></label>
                    <p><i class="fas fa-user" id="last_name"></i>{{ UserProfile.last_name }}</p>
                </div>
            </div>
            <div class="form-group">

                <div class="col-xs-6">
                    <label for="email"><h4>Email</h4></label>
                    <p><i class="fas fa-user" id="email"></i>{{ UserProfile.email }}</p>
                </div>
            </div>
            <div class="form-group">

                <div class="col-xs-6">
                    <label for="birthdate"><h4>Date de naissance</h4></label>
                    <p><i class="fas fa-user" id="birthdate"></i>
                        {% if UserProfile.Birthdate != None %}
                            {{ UserProfile.Birthdate }}
                        {% else %}
                            Non renseigné
                        {% endif %}

                    </p>
                </div>
            </div>

            <div class="form-group">
                <div class="col-xs-6">
                    {% if UserProfile.is_autre %}
                        <label for="poste"><h4>Poste</h4></label>
                        <p><i class="fas fa-user" id="poste"></i>
                            {% if UserProfile.user_admin.poste != None %}
                                {{ UserProfile.user_admin.poste }}
                            {% else %}
                                Non renseigné
                            {% endif %}
                        </p>
                    {% else %}
                        <label for="majeure"><h4>Majeure</h4></label>
                        <p><i class="fas fa-user" id="majeure"></i>
                            {% if UserProfile.user_etudiant.majeure %}
                            {{ UserProfile.user_etudiant.majeure }}
                            {%else%}
                            Non renseigné
                            {%endif%}

                        </p>
                    {% endif %}

                </div>
            </div>

            <div class="form-group">

                <div class="col-xs-6">
                    <label for="campus"><h4>Campus</h4></label>
                    <p><i class="fas fa-user" id="campus"></i>
                        {% if UserProfile.campus != None %}
                            {{ UserProfile.campus }}
                        {% else %}
                            Non renseigné
                        {% endif %}
                    </p>
                </div>
            </div>
            <button class="btn btn-success" onclick="onBack()">Retour</button>
            <hr>

        </div><!--/col-9-->
    </div><!--/row-->
    <script>
        function onBack(){
            if(document.referrer !== 'http://localhost:8000/profil/update/'){
                history.back()
            }else{
                window.location = '/';
            }
        }
    </script>
</html>