{% extends "header-login.html" %}
{% block title %}Profil{%endblock%}
{% block headerlink%}
<style>
    *{
        box-sizing: border-box;
    }
    .form-group p{
        font-size: 1.3rem;
        padding-left: 15px;
    }
    .form-group p span{
        margin-left: 10px;
    }
    @media screen and (max-width: 900px){
        .container,.profil{
            font-size: .8rem;
        }
        h4, i,span{
            font-size: .8rem;
        }
    }
</style>
{%endblock%}
{% block content%}
<hr>
<div class="container">

    <div class="row">
        <div class="col-sm-3"><!--left col-->


            <div class="text-center">
                {% if UserProfile.photo is not None and UserProfile.photo != "" %}
                    <img src="{{ UserProfile.photo.url }}" alt="">
                {% else %}
                    <img src="{{ UserProfile.avatar }}" alt="">
                {% endif %}
            </div>
            </hr><br>


            <div class="card mb-3">
                <div class="card-header">Date d'inscription </div>
                <div class="card-body">
                    <p class="card-text"> {{ UserProfile.date_joined }} </p>
                </div>

            </div>


            <div class="card mb-3">
                <div class="card-header">Activité</div>
                <ul class="list-group list-group-flush">
                <li class="list-group-item d-flex justify-content-between"><span class=""><strong>Article{{countArticles|pluralize}}</strong></span>{{countArticles}}</li>
                <li class="list-group-item d-flex justify-content-between"><span class=""><strong>Commentaire{{countCommentaires|pluralize}}</strong></span>{{countCommentaires}}</li>
                <li class="list-group-item d-flex justify-content-between"><span class=""><strong>Message{{countMessages|pluralize}}</strong></span>{{countMessages}}</li>
            </ul>
            </div>

        </div><!--/col-3-->
        <div class="col-sm-9">
            <div class="userData ml-3">
                    <h2 style="display: inline">{{ UserProfile.first_name }} {{ UserProfile.last_name }}</h2>
                {% if UserProfile == request.user %}
                    <a class="btn btn-light btn-lg" style="float: right" href="{% url 'update-profil' %}">Editer</a>
                {% endif %}

                <br/>

                {% if UserProfile.is_autre %}
                    <span class="badge badge-info">Administration</span>
                {% else %}
                    <span class="badge badge-info ">Etudiant</span>
                {% endif %}
            </div>

            <hr>
            <div class="profil" style="display: grid;grid-template-columns: 1fr 1fr;padding:10px" >
                <div class="form-group">

                <div class="col-xs-6">
                    <label for="first_name"><h4>Prénom</h4></label>
                    <p><i class="fas fa-user" id="first_name"></i><span>{{ UserProfile.first_name }}</span></p>
                </div>
            </div>
            <div class="form-group">

                <div class="col-xs-6">
                    <label for="last_name"><h4>Nom</h4></label>
                    <p><i class="fas fa-user" id="last_name"></i><span>{{ UserProfile.last_name }}</span></p>
                </div>
            </div>
            <div class="form-group">

                <div class="col-xs-6">
                    <label for="email"><h4>Email</h4></label>
                    <p><i class="fas fa-envelope" id="email"></i><span>{{ UserProfile.email }}</span></p>
                </div>
            </div>
            <div class="form-group">

                <div class="col-xs-6">
                    <label for="birthdate"><h4>Date de naissance</h4></label>
                    <p><i class="fas fa-birthday-cake" id="birthdate"></i>
                        <span>
                             {% if UserProfile.Birthdate != None %}
                            {{ UserProfile.Birthdate }}
                        {% else %}
                            Non renseigné
                        {% endif %}

                        </span>
                    </p>
                </div>
            </div>

            <div class="form-group">
                <div class="col-xs-6">
                    {% if UserProfile.is_autre %}
                        <label for="poste"><h4>Poste</h4></label>
                        <p><i class="fas fa-user" id="poste"></i>
                            <span>
                                {% if UserProfile.user_admin.poste != None %}
                                {{ UserProfile.user_admin.poste }}
                            {% else %}
                                Non renseigné
                            {% endif %}
                            </span>

                        </p>
                    {% else %}
                        <label for="majeure"><h4>Majeure</h4></label>
                        <p><i class="fas fa-user-graduate" id="majeure"></i>
                            <span>
                                 {% if UserProfile.user_etudiant.majeure %}
                            {{ UserProfile.user_etudiant.majeure }}
                            {%else%}
                            Non renseigné
                            {%endif%}
                            </span>


                        </p>
                    {% endif %}

                </div>
            </div>

            <div class="form-group">

                <div class="col-xs-6">
                    <label for="campus"><h4>Campus</h4></label>
                    <p><i class="fas fa-search-location" id="campus"></i>
                        <span>
                            {% if UserProfile.campus != None %}
                            {{ UserProfile.campus }}
                        {% else %}
                            Non renseigné
                        {% endif %}
                        </span>

                    </p>
                </div>
            </div>
            </div>

            <button class="btn btn-success btn-lg" onclick="onBack()">Retour</button>
            <hr>

        </div><!--/col-9-->
    </div><!--/row-->
</div>
{% endblock %}
{% block script%}
    <script>
        function onBack(){
            if(document.referrer !== `${location.protocol}//${location.host}/profil/update/`){
                history.back()
            }else{
                window.location = '/';
            }
        }
    </script>
{%endblock%}