{% extends "header-login.html" %}
{% block title %}New article{% endblock %}
{% block headerlink %}
{% load static%}
<link rel="stylesheet" href="{% static 'timeline/css/add.css' %}">

{% endblock %}

{% block content %}
<form action="" enctype="multipart/form-data">
    {{form.as_p}}
</form>
<!-- <div id="sample">
    <form method="post" enctype="multipart/form-data" class="shadow-lg p-3 mb-5 bg-white rounded">
        {% csrf_token %}
        <div class="form-group">
            {{form.title}}
        </div>
        <div class="form-group">
            {% if can_add_tag %}
            <span class="btn btn-link" data-toggle="modal" data-target="#exampleModal">Add tag</span>
            {% else %}
            <span style="color:#00a8ff">You can pick up one or more tags :</span>
            {% endif %}
            {{form.tags}}

        </div>
        <div class="form-group" id="contenu_zone">
            {{form.media}}
            {{form.content}}
        </div>
        {% if file %}
        <small> Your file : <a href="{{file}}">{{file}}</a></small>
        {% endif %}
        <div class="form-group" id="button_zone">
            <label for="file_article" class="btn btn-info">Pick up a file</label>
                {{form.photo}}

        <input type="submit" class="btn btn-success" value="Publier">
        <a href="javascript:history.back()" class="btn btn-danger">Go back</a>
            </div>
        <small id="nom_fichier" class="alert alert-success" role="alert" style="opacity: 0">
        </small>
    </form>
</div>
 {% if can_add_tag %}
 Modal
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Add a tag</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
        <form method="post" id="form-tag">
      <div class="modal-body">
          {% csrf_token %}
            {{formTag.text_tag}}
              {{formTag.type_tag}}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Add</button>
      </div>
            </form>
    </div>
  </div>
</div> -->
{% endif %}
{% endblock %}

{%block script%}
<script>
    const file_input = document.querySelector('#file_article');
    const nom_fichier = document.querySelector('#nom_fichier');
    file_input.addEventListener('change',(e)=>{
        const fichier = e.target.files[0];
        const fichier_name = fichier.name;
        nom_fichier.textContent = fichier_name;
        nom_fichier.style.opacity='1';
    })
</script>
{% endblock%}